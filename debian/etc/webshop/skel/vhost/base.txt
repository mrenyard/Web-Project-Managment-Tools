<VirtualHost *:80>
  ServerName DOMAIN
  ServerAlias www.DOMAIN
  Redirect permanent / https://DOMAIN/
</VirtualHost>
<VirtualHost *:443>
  ServerName DOMAIN
  ServerAlias www.DOMAIN
  DocumentRoot /var/www/DOMAIN
  SSLEngine on
  SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
  SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
</VirtualHost>

<VirtualHost *:80>
  ServerName dev.DOMAIN
  Redirect permanent / https://dev.DOMAIN/
</VirtualHost>
<VirtualHost *:443>
  ServerName dev.DOMAIN
  DocumentRoot /var/www/dev.DOMAIN
  SSLEngine on
  SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
  SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
</VirtualHost>

<VirtualHost *:80>
  ServerName style.DOMAIN
  Redirect permanent / https://style.DOMAIN/
</VirtualHost>
<VirtualHost *:443>
  ServerName style.DOMAIN
  DocumentRoot /var/www/style.DOMAIN
  SSLEngine on
  SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
  SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
</VirtualHost>

<VirtualHost *:80>
  ServerName func.DOMAIN
  Redirect permanent / https://func.DOMAIN/
</VirtualHost>
<VirtualHost *:443>
  ServerName func.DOMAIN
  DocumentRoot /var/www/func.DOMAIN
  SSLEngine on
  SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
  SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
</VirtualHost>

<VirtualHost *:80>
  ServerName media.DOMAIN
  Redirect permanent / https://media.DOMAIN/
</VirtualHost>
<VirtualHost *:443>
  ServerName media.DOMAIN
  DocumentRoot /var/www/media.DOMAIN
  SSLEngine on
  SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
  SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
</VirtualHost>

<Directory "/var/www/DOMAIN/private/">
  DirectoryIndex index.php
  Options MultiViews
  AuthType Basic
  AuthName "Private"
  AuthUserFile /var/www/DOMAIN/private/.htpasswd
  Require valid-user
  AllowOverride None
  Order allow,deny
  allow from all
</Directory>
