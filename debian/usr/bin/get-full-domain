#!/bin/bash -eu

if [ "$#" -lt 1 ] || [ "$1" == "--help" ] || [ "$1" == "-h" ]; then
  echo "Usage: get-full-domain DOMAIN";
  exit 2;
fi

declare -r DOMAIN=${1};

LAN=false; LAN_HOSTNAME=; if [[ "${HOSTNAME}" == *.lan ]]; then LAN=true; LAN_HOSTNAME=${HOSTNAME}; fi

if [[ $DOMAIN == *.* ]]; then
  FULL_DOMAIN=${DOMAIN,,};
else
  if [[ "${LAN}" == true ]]; then
    FULL_DOMAIN="${DOMAIN,,}.${LAN_HOSTNAME,,}";
  else
    FULL_DOMAIN="${DOMAIN,,}.${HOSTNAME,,}.lan";
  fi
fi

echo ${FULL_DOMAIN};
exit 0;
